// Automatically generated by xdrgen
// DO NOT EDIT or your changes may be overwritten

package me.rahimklaber.stellar.base.xdr


/**
 * TrustLineAsset's original definition in the XDR file is:
 * ```
 * union TrustLineAsset switch (AssetType type)
{
case ASSET_TYPE_NATIVE: // Not credit
void;

case ASSET_TYPE_CREDIT_ALPHANUM4:
AlphaNum4 alphaNum4;

case ASSET_TYPE_CREDIT_ALPHANUM12:
AlphaNum12 alphaNum12;

case ASSET_TYPE_POOL_SHARE:
PoolID liquidityPoolID;

// add other asset types here in the future
};
 * ```
 */
sealed class TrustLineAsset(val type: AssetType) : XdrElement {
    data object Native : TrustLineAsset(AssetType.ASSET_TYPE_NATIVE) {
        override fun encode(stream: XdrOutputStream) {
            type.encode(stream)
        }
    }

    fun alphaNum4OrNull(): CreditAlphanum4? = if (this is CreditAlphanum4) this else null
    data class CreditAlphanum4(
        val alphaNum4: AlphaNum4,
    ) : TrustLineAsset(AssetType.ASSET_TYPE_CREDIT_ALPHANUM4) {
        override fun encode(stream: XdrOutputStream) {
            type.encode(stream)
            alphaNum4.encode(stream)
        }
    }

    fun alphaNum12OrNull(): CreditAlphanum12? = if (this is CreditAlphanum12) this else null
    data class CreditAlphanum12(
        val alphaNum12: AlphaNum12,
    ) : TrustLineAsset(AssetType.ASSET_TYPE_CREDIT_ALPHANUM12) {
        override fun encode(stream: XdrOutputStream) {
            type.encode(stream)
            alphaNum12.encode(stream)
        }
    }

    fun liquidityPoolIDOrNull(): PoolShare? = if (this is PoolShare) this else null
    data class PoolShare(
        val liquidityPoolID: PoolID,
    ) : TrustLineAsset(AssetType.ASSET_TYPE_POOL_SHARE) {
        override fun encode(stream: XdrOutputStream) {
            type.encode(stream)
            liquidityPoolID.encode(stream)
        }
    }

    companion object : XdrElementDecoder<TrustLineAsset> {
        override fun decode(stream: XdrInputStream): TrustLineAsset {
            return when (val type = AssetType.decode(stream)) {
                AssetType.ASSET_TYPE_NATIVE -> Native
                AssetType.ASSET_TYPE_CREDIT_ALPHANUM4 -> {
                    val alphaNum4 = AlphaNum4.decode(stream)
                    CreditAlphanum4(alphaNum4)
                }

                AssetType.ASSET_TYPE_CREDIT_ALPHANUM12 -> {
                    val alphaNum12 = AlphaNum12.decode(stream)
                    CreditAlphanum12(alphaNum12)
                }

                AssetType.ASSET_TYPE_POOL_SHARE -> {
                    val liquidityPoolID = PoolID.decode(stream)
                    PoolShare(liquidityPoolID)
                }

                else -> throw IllegalArgumentException("unknown type: $type")
            }
        }
    }
}
