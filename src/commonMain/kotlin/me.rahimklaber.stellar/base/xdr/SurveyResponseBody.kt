// Automatically generated by xdrgen
// DO NOT EDIT or your changes may be overwritten

package me.rahimklaber.stellar.base.xdr


/**
 * SurveyResponseBody's original definition in the XDR file is:
 * ```
 * union SurveyResponseBody switch (SurveyMessageResponseType type)
{
case SURVEY_TOPOLOGY_RESPONSE_V2:
TopologyResponseBodyV2 topologyResponseBodyV2;
};
 * ```
 */
sealed class SurveyResponseBody(val type: SurveyMessageResponseType) : XdrElement {
    fun topologyResponseBodyV2OrNull(): SurveyTopologyResponseV2? = if (this is SurveyTopologyResponseV2) this else null
    data class SurveyTopologyResponseV2(
        val topologyResponseBodyV2: TopologyResponseBodyV2,
    ) : SurveyResponseBody(SurveyMessageResponseType.SURVEY_TOPOLOGY_RESPONSE_V2) {
        override fun encode(stream: XdrOutputStream) {
            type.encode(stream)
            topologyResponseBodyV2.encode(stream)
        }
    }

    companion object : XdrElementDecoder<SurveyResponseBody> {
        override fun decode(stream: XdrInputStream): SurveyResponseBody {
            return when (val type = SurveyMessageResponseType.decode(stream)) {
                SurveyMessageResponseType.SURVEY_TOPOLOGY_RESPONSE_V2 -> {
                    val topologyResponseBodyV2 = TopologyResponseBodyV2.decode(stream)
                    SurveyTopologyResponseV2(topologyResponseBodyV2)
                }

                else -> throw IllegalArgumentException("unknown type: $type")
            }
        }
    }
}
